<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Visualizador Clim√°tico</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.44.0/apexcharts.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="data.js"></script>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>Visualizador Clim√°tico v2.4.0</h1>
            <p>An√°lisis meteorol√≥gico - Datos hist√≥ricos y pron√≥sticos</p>
        </div>

        <div class="control-panel">
            <form id="weatherForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="locationSelect">Ubicaci√≥n</label>
                        <select id="locationSelect" required>
                            <option value="">Seleccionar punto de medici√≥n...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="dataType">Tipo de Datos</label>
                        <select id="dataType" required>
                            <option value="historical">Datos Hist√≥ricos</option>
                            <option value="forecast">Pron√≥stico</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="dateGroup">
                        <label for="endDate">Fecha final</label>
                        <input type="date" id="endDate" required>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn-generate" id="submitBtn">
                            Analizar
                        </button>
                    </div>
                </div>
                
                <div class="coordinates-display" id="coordinatesDisplay" style="display: none;">
                    <strong>Coordenadas:</strong> <span id="coordsText"></span>
                </div>
            </form>
        </div>

        <div id="loading" class="loading">Obteniendo datos meteorol√≥gicos...</div>
        <div id="error" class="error"></div>
        
        <div id="analysisContainer" style="display: none;">
            <div class="tabs-container">
                <div class="tabs-nav">
                    <button class="tab-btn active" data-tab="executive">üìã Resumen Ejecutivo</button>
                    <button class="tab-btn" data-tab="combined">üìä An√°lisis Combinado</button>
                    <button class="tab-btn" data-tab="correlations">üîó Correlaciones</button>
                    <button class="tab-btn" data-tab="variables">üìà Variables</button>
                </div>
                
                <div class="tabs-content">
                    <!-- Tab: Resumen Ejecutivo -->
                    <div id="executiveTab" class="tab-panel active">
                        <div id="executiveSummary" class="executive-summary"></div>
                        <div id="statsPanel" class="stats-grid"></div>
                        <div class="dashboard-grid">
                            <div id="alertsPanel" class="alert-panel">
                                <div class="alert-title">
                                    üö® Sistema de Alertas
                                    <button class="info-btn" onclick="toggleAlertInfo()">‚ÑπÔ∏è</button>
                                </div>
                                <div id="alertInfo" class="alert-info-panel" style="display: none;">
                                    <h4>üìä C√≥mo se calculan las alertas:</h4>
                                    <div class="info-item">
                                        <strong>‚ùÑÔ∏è Riesgo de Helada:</strong> Se detecta cuando la temperatura m√≠nima cae por debajo de 0¬∞C. Las heladas pueden da√±ar cultivos y afectar la infraestructura.
                                    </div>
                                    <div class="info-item">
                                        <strong>üí® Vientos Peligrosos:</strong> 
                                        <ul>
                                            <li>Moderados: 30-50 km/h - Dificultad para caminar, ramas se mueven</li>
                                            <li>Peligrosos: >50 km/h - Riesgo de ca√≠da de √°rboles y da√±os estructurales</li>
                                        </ul>
                                    </div>
                                    <div class="info-item">
                                        <strong>üî• Temperatura Alta:</strong> >30¬∞C - Riesgo de estr√©s t√©rmico, mayor evaporaci√≥n y demanda energ√©tica.
                                    </div>
                                    <div class="info-item">
                                        <strong>üåßÔ∏è Lluvia Intensa:</strong> >10mm/h - Posible acumulaci√≥n de agua, drenaje saturado.
                                    </div>
                                </div>
                                <div id="alertsList"></div>
                            </div>
                            <div id="patternsPanel" class="pattern-analysis">
                                <div class="alert-title">üìä An√°lisis de Patrones</div>
                                <div id="patternsList"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab: An√°lisis Combinado -->
                    <div id="combinedTab" class="tab-panel">
                        <div id="combinedChartContainer" class="chart-card">
                            <div class="chart-title">üìà An√°lisis Combinado - Temperatura, Humedad y Presi√≥n</div>
                            <div id="combinedChart" style="height: 400px;"></div>
                            <div class="chart-explanation">
                                <h4>üîç ¬øQu√© buscamos en este an√°lisis?</h4>
                                <div class="explanation-grid">
                                    <div class="explanation-item">
                                        <strong>üå°Ô∏è Temperatura (Rojo):</strong> Patr√≥n de calentamiento/enfriamiento diurno. Busca picos, valles y tendencias generales.
                                    </div>
                                    <div class="explanation-item">
                                        <strong>üíß Humedad (Verde):</strong> Inversamente relacionada con temperatura. Alta humedad + baja temperatura = posible condensaci√≥n/niebla.
                                    </div>
                                    <div class="explanation-item">
                                        <strong>üìä Presi√≥n (Azul):</strong> Cambios indican sistemas meteorol√≥gicos. Ca√≠das bruscas = mal tiempo entrante, subidas = mejora del clima.
                                    </div>
                                </div>
                                <div class="key-insights">
                                    <strong>üí° Patrones clave a observar:</strong>
                                    <ul>
                                        <li><strong>Correlaci√≥n inversa temp-humedad:</strong> Normal en ciclos diarios</li>
                                        <li><strong>Presi√≥n estable:</strong> Tiempo predecible</li>
                                        <li><strong>Todos los valores cambiando juntos:</strong> Sistema frontal pasando</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab: Correlaciones -->
                    <div id="correlationsTab" class="tab-panel">
                        <div class="chart-card">
                            <div class="chart-title">üîó Matriz de Correlaciones entre Variables Meteorol√≥gicas</div>
                            <div class="correlation-info">
                                <p><strong>Interpretaci√≥n:</strong> Los valores van de -1 (correlaci√≥n negativa perfecta) a +1 (correlaci√≥n positiva perfecta). El 0 indica ausencia de correlaci√≥n lineal.</p>
                            </div>
                            <div id="correlationChart" style="height: 500px;"></div>
                        </div>
                        
                        <div class="correlation-insights">
                            <div class="chart-title">üîç Insights de Correlaciones</div>
                            <div id="correlationInsights" class="insights-container"></div>
                        </div>
                    </div>
                    
                    <!-- Tab: Variables -->
                    <div id="variablesTab" class="tab-panel">
                        <div id="chartsContainer" class="charts-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>Desarrollado por <strong>Tu Nombre</strong> - Visualizador Clim√°tico</p>
            <p>Datos meteorol√≥gicos proporcionados por <a href="https://open-meteo.com/" target="_blank">Open-Meteo API</a></p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>