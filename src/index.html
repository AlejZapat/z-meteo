<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Visualizador ClimÃ¡tico v2.1.0</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.44.0/apexcharts.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>Visualizador ClimÃ¡tico</h1>
            <p>AnÃ¡lisis meteorolÃ³gico de las Ãºltimas 48 horas</p>
        </div>

        <div class="control-panel">
            <form id="weatherForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="locationSelect">UbicaciÃ³n</label>
                        <select id="locationSelect" required>
                            <option value="">Seleccionar punto de mediciÃ³n...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="endDate">Fecha final</label>
                        <input type="date" id="endDate" required>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn-generate" id="submitBtn">
                            Generar AnÃ¡lisis
                        </button>
                    </div>
                </div>
                
                <div class="coordinates-display" id="coordinatesDisplay" style="display: none;">
                    <strong>Coordenadas:</strong> <span id="coordsText"></span>
                </div>
            </form>
        </div>

        <div id="loading" class="loading">Obteniendo datos meteorolÃ³gicos</div>
        <div id="error" class="error"></div>
        
        <div id="analysisContainer" style="display: none;">
            <div class="tabs-container">
                <div class="tabs-nav">
                    <button class="tab-btn active" data-tab="executive">ğŸ“‹ Resumen Ejecutivo</button>
                    <button class="tab-btn" data-tab="combined">ğŸ“Š AnÃ¡lisis Combinado</button>
                    <button class="tab-btn" data-tab="correlations">ğŸ”— Correlaciones</button>
                    <button class="tab-btn" data-tab="variables">ğŸ“ˆ Variables</button>
                </div>
                
                <div class="tabs-content">
                    <!-- Tab: Resumen Ejecutivo -->
                    <div id="executiveTab" class="tab-panel active">
                        <div id="executiveSummary" class="executive-summary"></div>
                        <div id="statsPanel" class="stats-grid"></div>
                        <div class="dashboard-grid">
                            <div id="alertsPanel" class="alert-panel">
                                <div class="alert-title">
                                    ğŸš¨ Sistema de Alertas
                                    <button class="info-btn" onclick="toggleAlertInfo()">â„¹ï¸</button>
                                </div>
                                <div id="alertInfo" class="alert-info-panel" style="display: none;">
                                    <h4>ğŸ“Š CÃ³mo se calculan las alertas:</h4>
                                    <div class="info-item">
                                        <strong>â„ï¸ Riesgo de Helada:</strong> Se detecta cuando la temperatura mÃ­nima cae por debajo de 0Â°C. Las heladas pueden daÃ±ar cultivos y afectar la infraestructura.
                                    </div>
                                    <div class="info-item">
                                        <strong>ğŸ’¨ Vientos Peligrosos:</strong> 
                                        <ul>
                                            <li>Moderados: 30-50 km/h - Dificultad para caminar, ramas se mueven</li>
                                            <li>Peligrosos: >50 km/h - Riesgo de caÃ­da de Ã¡rboles y daÃ±os estructurales</li>
                                        </ul>
                                    </div>
                                    <div class="info-item">
                                        <strong>ğŸ”¥ Temperatura Alta:</strong> >30Â°C - Riesgo de estrÃ©s tÃ©rmico, mayor evaporaciÃ³n y demanda energÃ©tica.
                                    </div>
                                    <div class="info-item">
                                        <strong>ğŸŒ§ï¸ Lluvia Intensa:</strong> >10mm/h - Posible acumulaciÃ³n de agua, drenaje saturado.
                                    </div>
                                </div>
                                <div id="alertsList"></div>
                            </div>
                            <div id="patternsPanel" class="pattern-analysis">
                                <div class="alert-title">ğŸ“Š AnÃ¡lisis de Patrones</div>
                                <div id="patternsList"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab: AnÃ¡lisis Combinado -->
                    <div id="combinedTab" class="tab-panel">
                        <div id="combinedChartContainer" class="chart-card">
                            <div class="chart-title">ğŸ“ˆ AnÃ¡lisis Combinado - Temperatura, Humedad y PresiÃ³n</div>
                            <div id="combinedChart" style="height: 400px;"></div>
                            <div class="chart-explanation">
                                <h4>ğŸ” Â¿QuÃ© buscamos en este anÃ¡lisis?</h4>
                                <div class="explanation-grid">
                                    <div class="explanation-item">
                                        <strong>ğŸŒ¡ï¸ Temperatura (Rojo):</strong> PatrÃ³n de calentamiento/enfriamiento diurno. Busca picos, valles y tendencias generales.
                                    </div>
                                    <div class="explanation-item">
                                        <strong>ğŸ’§ Humedad (Verde):</strong> Inversamente relacionada con temperatura. Alta humedad + baja temperatura = posible condensaciÃ³n/niebla.
                                    </div>
                                    <div class="explanation-item">
                                        <strong>ğŸ“Š PresiÃ³n (Azul):</strong> Cambios indican sistemas meteorolÃ³gicos. CaÃ­das bruscas = mal tiempo entrante, subidas = mejora del clima.
                                    </div>
                                </div>
                                <div class="key-insights">
                                    <strong>ğŸ’¡ Patrones clave a observar:</strong>
                                    <ul>
                                        <li><strong>CorrelaciÃ³n inversa temp-humedad:</strong> Normal en ciclos diarios</li>
                                        <li><strong>PresiÃ³n estable:</strong> Tiempo predecible</li>
                                        <li><strong>Todos los valores cambiando juntos:</strong> Sistema frontal pasando</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tab: Correlaciones -->
                    <div id="correlationsTab" class="tab-panel">
                        <div class="chart-card">
                            <div class="chart-title">ğŸ”— Matriz de Correlaciones entre Variables MeteorolÃ³gicas</div>
                            <div class="correlation-info">
                                <p><strong>InterpretaciÃ³n:</strong> Los valores van de -1 (correlaciÃ³n negativa perfecta) a +1 (correlaciÃ³n positiva perfecta). El 0 indica ausencia de correlaciÃ³n lineal.</p>
                            </div>
                            <div id="correlationChart" style="height: 500px;"></div>
                        </div>
                        
                        <div class="correlation-insights">
                            <div class="chart-title">ğŸ” Insights de Correlaciones</div>
                            <div id="correlationInsights" class="insights-container"></div>
                        </div>
                    </div>
                    
                    <!-- Tab: Variables -->
                    <div id="variablesTab" class="tab-panel">
                        <div id="chartsContainer" class="charts-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>Desarrollado por <strong>Tu Nombre</strong> - Visualizador ClimÃ¡tico v2.3.0</p>
            <p>Datos meteorolÃ³gicos proporcionados por <a href="https://open-meteo.com/" target="_blank">Open-Meteo API</a></p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>